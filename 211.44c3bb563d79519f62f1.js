"use strict";(self.webpackChunkcontatos_web=self.webpackChunkcontatos_web||[]).push([[211],{7211:(z,C,c)=>{c.r(C),c.d(C,{ContactModule:()=>j});var p=c(8583),s=c(3679),i=c(2789),u=c(1095),h=c(8295),f=c(9983),g=c(7441),d=c(6458),r=c(4655),t=c(7716),T=c(2340),x=c(1841);let Z=(()=>{class n{constructor(o){this.http=o,this.apiRoot=T.N.api_url}getContacts(){return this.http.get(this.apiRoot+"contact")}getContact(o){return this.http.get(this.apiRoot+"contact/"+o)}addContact(o){return this.http.post(this.apiRoot+"contact/",o)}editContact(o,e){return this.http.put(this.apiRoot+"contact/"+o,e)}deleteContact(o){return this.http.delete(this.apiRoot+"contact/"+o)}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(x.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Nome "),t.qZA())}function y(n,a){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const o=a.$implicit;t.xp6(1),t.hij(" ",o.fullName," ")}}function A(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Email "),t.qZA())}function N(n,a){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const o=a.$implicit;t.xp6(1),t.hij(" ",o.email," ")}}function b(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Telefone "),t.qZA())}function F(n,a){if(1&n&&(t.TgZ(0,"td",14),t.TgZ(1,"a",15),t._uU(2),t.qZA(),t.qZA()),2&n){const o=a.$implicit;t.xp6(1),t.MGl("href","https://api.whatsapp.com/send?phone=",o.phone,"",t.LSH),t.xp6(1),t.Oqu(o.phone)}}function Y(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Empresa "),t.qZA())}function D(n,a){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const o=a.$implicit;t.xp6(1),t.hij(" ",o.company.name," ")}}function U(n,a){1&n&&t._UZ(0,"th",13)}function O(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"td",14),t.TgZ(1,"button",2),t._uU(2,"Editar"),t.qZA(),t.TgZ(3,"button",16),t.NdJ("click",function(){const l=t.CHM(o).$implicit;return t.oxw().deleteContact(l.id)}),t._uU(4,"Excluir"),t.qZA(),t.qZA()}if(2&n){const o=a.$implicit;t.xp6(1),t.Q6J("routerLink","/contatos/"+o.id)}}function q(n,a){1&n&&t._UZ(0,"tr",17)}function M(n,a){1&n&&t._UZ(0,"tr",18)}const B=function(){return["/contatos/novo-contato"]};let J=(()=>{class n{constructor(o,e){this.contactService=o,this.snackBar=e,this.displayedColumns=["fullName","email","phone","company","actions"],this.contacts=[]}ngOnInit(){this.contactService.getContacts().subscribe(o=>{this.contacts=o},o=>{this.snackBar.open(o.message,"OK",{verticalPosition:"top"})})}deleteContact(o){this.contactService.deleteContact(o).subscribe(e=>{this.contacts=this.contacts.filter(m=>m.id!==o)},e=>{this.snackBar.open(e.message,"OK",{verticalPosition:"top"})})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(Z),t.Y36(d.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contacts"]],decls:22,vars:5,consts:[[1,"contacts"],[1,"new-contact"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","company"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"href"],["mat-raised-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,e){1&o&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t._uU(3,"Novo Contato"),t.qZA(),t.qZA(),t.TgZ(4,"table",3),t.ynx(5,4),t.YNc(6,_,2,0,"th",5),t.YNc(7,y,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,A,2,0,"th",5),t.YNc(10,N,2,1,"td",6),t.BQk(),t.ynx(11,8),t.YNc(12,b,2,0,"th",5),t.YNc(13,F,3,2,"td",6),t.BQk(),t.ynx(14,9),t.YNc(15,Y,2,0,"th",5),t.YNc(16,D,2,1,"td",6),t.BQk(),t.ynx(17,10),t.YNc(18,U,1,0,"th",5),t.YNc(19,O,5,1,"td",6),t.BQk(),t.YNc(20,q,1,0,"tr",11),t.YNc(21,M,1,0,"tr",12),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Q6J("routerLink",t.DdM(4,B)),t.xp6(2),t.Q6J("dataSource",e.contacts),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns))},directives:[u.lW,r.rH,i.BZ,i.w1,i.fO,i.Dz,i.as,i.nj,i.ge,i.ev,i.XQ,i.Gk],styles:[".contacts[_ngcontent-%COMP%]{padding:20px;max-width:1000px;margin:auto}.contacts[_ngcontent-%COMP%]   .new-contact[_ngcontent-%COMP%]{text-align:right;margin-bottom:20px}.contacts[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),n})();class S{constructor(a,o,e,m,l){this.id=a,this.fullName=o,this.email=e,this.phone=m,this.company=l}}var w=c(4245),E=c(6196),Q=c(2458);function R(n,a){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){const o=a.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",null==o?null:o.name,"")}}function P(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"form",2),t.TgZ(1,"mat-form-field",3),t.TgZ(2,"mat-label"),t._uU(3,"Nome Completo"),t.qZA(),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"Email"),t.qZA(),t._UZ(8,"input",5),t.qZA(),t.TgZ(9,"mat-form-field",3),t.TgZ(10,"mat-label"),t._uU(11,"Telefone"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"mat-form-field",3),t.TgZ(14,"mat-label"),t._uU(15,"Empresa"),t.qZA(),t.TgZ(16,"mat-select",7),t.YNc(17,R,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return t.CHM(o),t.oxw().saveContact()}),t.TgZ(19,"span"),t._uU(20,"SALVAR"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("formGroup",o.contactForm),t.xp6(17),t.Q6J("ngForOf",o.companies),t.xp6(1),t.Q6J("disabled",o.contactForm.invalid||o.contactForm.pristine||0==o.contactForm.controls.company.value)}}const k=[{path:"",component:J},{path:":id",component:(()=>{class n{constructor(o,e,m,l,v,L){this.contactService=o,this.companyService=e,this.fb=m,this.activatedRoute=l,this.router=v,this.snackBar=L,this.companies=[],this.contact=new S(0,"","","",new w.Y(0,"","","","","","","","","","")),this.contactId=0,this.isEdit=!1,this.getCompanies()}ngOnInit(){this.activatedRoute.params.subscribe(o=>{"novo-contato"!=o.id?(this.isEdit=!0,this.contactId=o.id,this.getContact(this.contactId)):this.contactForm=this.createForm()})}getCompanies(){this.companyService.getCompanies().subscribe(o=>{this.companies=o},o=>{this.snackBar.open(o.message,"OK",{verticalPosition:"top"})})}getContact(o){this.contactService.getContact(o).subscribe(e=>{this.contact=e,this.contactForm=this.createForm()},e=>{this.snackBar.open(e.message,"OK",{verticalPosition:"top"})})}createForm(){return this.fb.group({fullName:[this.contact.fullName],email:[this.contact.email],phone:[this.contact.phone],company:[this.contact.company.id]})}saveContact(){this.addEditContact=Object.assign({},this.contactForm.value),this.isEdit?this.contactService.editContact(this.contactId,this.addEditContact).subscribe(o=>{this.contact=o,this.router.navigate(["/contatos"])},o=>{this.snackBar.open(o.message,"OK",{verticalPosition:"top"})}):this.contactService.addContact(this.addEditContact).subscribe(o=>{this.contact=o,this.router.navigate(["/contatos"])},o=>{this.snackBar.open(o.message,"OK",{verticalPosition:"top"})})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(Z),t.Y36(E.J),t.Y36(s.qu),t.Y36(r.gz),t.Y36(r.F0),t.Y36(d.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contact-details"]],decls:2,vars:1,consts:[[1,"contact-details"],["name","contactForm",3,"formGroup",4,"ngIf"],["name","contactForm",3,"formGroup"],["appearance","outline","floatLabel","always",1,"field"],["matInput","","formControlName","fullName","required",""],["matInput","","formControlName","email","required",""],["matInput","","formControlName","phone","required",""],["placeholder","Escolha uma Empresa","formControlName","company","required",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"btn-save",3,"disabled","click"],[3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"section",0),t.YNc(1,P,21,3,"form",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",e.contactForm&&e.companies))},directives:[p.O5,s._Y,s.JL,s.sg,h.KE,h.hX,f.Nt,s.Fj,s.JJ,s.u,s.Q7,g.gD,p.sg,u.lW,Q.ey],styles:[".contact-details[_ngcontent-%COMP%]{padding:20px;max-width:1000px;margin:auto}.contact-details[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:100%}"]}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.Bz.forChild(k)],r.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,I,i.p0,u.ot,s.u5,h.lN,f.c,s.UX,g.LD,d.ZX]]}),n})()}}]);